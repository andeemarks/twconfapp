<!doctype html>
<html>
<head>
    <meta charset="UTF-8"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <title>Agile 2010</title>

    <style type="text/css" media="screen">@import "jqtouch/jqtouch.css";</style>
    <style type="text/css" media="screen">@import "jqtouch/SegmentedMenu.css";</style>
    <style type="text/css" media="screen">@import "themes/jqt/theme.css";</style>
    <style type="text/css" media="screen">@import "resources/agile2010/agile2010.css";</style>

    <script src="jqtouch/jquery-1.4.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="jqtouch/jqtouch.js" type="application/x-javascript" charset="utf-8"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script src="resources/agile2010/agile2010.js" type="application/x-javascript" charset="utf-8"></script>

    <script type="text/javascript" charset="utf-8">
        var jQT = new $.jQTouch({
            icon: '/resources/agile2010/icon.png',
            addGlossToIcon: false,
            startupScreen: '/resources/agile2010/startup.png',
            statusBar: 'black',
            preloadImages: [
                'themes/jqt/img/back_button.png',
                'themes/jqt/img/back_button_clicked.png',
                'themes/jqt/img/button_clicked.png',
                'themes/jqt/img/grayButton.png',
                'themes/jqt/img/whiteButton.png',
                'themes/jqt/img/loading.gif',
                'resources/yes_no.png',
                'resources/agile2010/floorplan.jpg'
            ]
        })
    </script>
</head>

<body>
<div id="jqt">
    <!-- speakers -->
    <%
       speakers.each_key do |id|
           speaker = speakers[id]
    %>
        <div id="<%= id %>">
            <div class="toolbar">
                <h1><%= speaker['name'] %></h1>
                <a class="button back" href="#">Back</a>
            </div>
            <div class="speaker-info">
                <img src="resources/agile2010/speakers/<%= id %>.gif" width="80" height="120" class="speaker-photo"/>

                <div class="speaker-title2"><%= speaker['title'] %></div>
                <%= speaker['description'] %>
            </div>
        </div>
    <% end %>

    <!-- topics -->
    <%
       topics.each_key do |id|
           topic = topics[id]
    %>
        <div id="<%= id %>" class="uses_local_data">
            <div class="toolbar">
                <h1><%= topic['date'] %></h1>
                <a class="button back" href="#">Back</a>
            </div>
            <div class="topic"><%= topic['title'] %></div>
            <%
               topic_speakers = topic['speakers']==nil ? [] : topic['speakers'].split(',')
            %>
            <ul class="speaker" speakers="<%= topic_speakers.map { |speaker_id| speakers[speaker_id.strip]['name'] }.join(' and ') %>">
                <%
                   topic_speakers.each do |speaker_id|
                       speaker_id.strip!
                       speaker = speakers[speaker_id]
                %>
                    <li class="arrow" class="speaker-names">
                        <a href="#<%= speaker_id %>">
                            <%= speaker['name'] %>
                            <div class="speaker-title"><%= speaker['title'] %></div>
                        </a>
                    </li>
                <% end %>
            </ul>
            <ul>
                <li style="color:#E0E0E0;">
                    I will attend
                    <span class="toggle toggle-yes-no"><input type="checkbox" topic="<%= id %>" class="attend-slider"/></span>
                </li>
            </ul>
            <div class="description">
                <%= topic['description'] %>
            </div>
        </div>
    <% end %>

    <!-- schedules -->
    <%
       days = [{:full => "Wednesday", :short => "Wed", :class => "current"}, {:full => "Thursday", :short => "Thu"}]
       days.each do |day|
    %>
        <div id="<%= day[:full] %>" class="selectable uses_local_data <%= day[:class] %>">
            <div class="toolbar">
                <h1>Agile 2010</h1>
                <a class="button slideup" href="#about">About</a>
            </div>
            <ul class="segmented two">
                <% days.each do |day_button_header| %><li><a class="dissolve <%= day==day_button_header ? "selected" : "" %>" href="#<%= day_button_header[:full] %>"><%= day_button_header[:full] %></a></li><% end %>
            </ul>
            <ul class="edgetoedge schedule">
                <%
                   previous_date = ''
                   topic_keys[day[:short]].each do |id|
                       topic = topics[id]
                %>
                    <%
                       date = topic['date'][4..-1].strip
                       if date!=previous_date
                    %>
                        <li class="sep"><%= date %></li>
                    <%
                       previous_date = date
                       end
                    %>
                    <li>
                        <a href="#<%= id %>" class="topic-link"><%= topic['title'] %></a>
                        <span class="speaker-title3">
                            <% topic_speakers = topic['speakers']==nil ? [] : topic['speakers'].split(',') %>
                            <%= topic_speakers.map { |speaker_id| speakers[speaker_id.strip]['name'] }.join(' and ') %>
                        </span>
                        <span class="toggle toggle-yes-no"><input type="checkbox" topic="<%= id %>" class="attend-slider"/></span>
                    </li>
                <% end %>
            </ul>
        </div>
    <% end %>

    <!-- about -->
    <div id="about" class="selectable">
        <p>About Agile 2010</p>

        <p><br/><br/><a href="#" class="grayButton goback">Close</a></p>
    </div>

    <!-- my sessions -->
    <div id="my-sessions" class="selectable">
        <div class="toolbar">
            <h1>My Sessions</h1>
            <a class="button back" href="#">Back</a>
        </div>
        <ul class="edgetoedge schedule">
        </ul>
    </div>

    <!-- twitter -->
    <div id="twitter" class="selectable">
        <div class="toolbar">
            <h1>Twitter #agileaus</h1>
            <a class="button back" href="#">Back</a>
            <a class="button slideup" href="#" onclick="requestTweetsJson(); return false;">Reload</a>
        </div>
        <div id="twitter-feed">
        </div>
    </div>

    <!-- map -->
    <div id="map" class="notransform">
        <div class="toolbar">
            <h1>Map</h1>
            <a href="#" class="back">Back</a>
        </div>
        <div id="map-container" class="notransform">
            <div id="map_text"></div>
            <div id="map-overflow" style="overflow: hidden; padding: 0; border: 0;" class="notransform">
                <div id="map_canvas" style="margin-left: -20px; margin-top: -20px;" class="notransform"></div>
            </div>
        </div>
    </div>

    <!-- floorplan -->
    <div id="floorplan" class="notransform">
        <div class="toolbar">
            <h1>Floor Plan</h1>
            <a href="#" class="back">Back</a>
        </div>
        <img src="resources/agile2010/floorplan.jpg"/>
    </div>

</div>
</body>
</html>